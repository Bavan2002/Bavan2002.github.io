<html>
<head>
  <title>MQTT Subscriber</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.min.js"></script>
  <script>
    // Create a client instance
    var client = new Paho.MQTT.Client("broker.example.com", 9001, "clientId");

    // set callback handlers
    client.onConnectionLost = onConnectionLost;
    client.onMessageArrived = onMessageArrived;

    // connect the client
    client.connect({onSuccess:onConnect});

    // called when the client connects
    function onConnect() {
      // Once a connection has been made, make a subscription and send a message.
      console.log("Connected to MQTT broker");
      client.subscribe("myTopic");
    }

    // called when the client loses its connection
    function onConnectionLost(responseObject) {
      if (responseObject.errorCode !== 0) {
        console.log("Connection lost: " + responseObject.errorMessage);
      }
    }

    // called when a message arrives
    function onMessageArrived(message) {
      console.log("Received message: " + message.payloadString);
      // do something with the message payload
    }
  </script>
</head>
<body>
  <h1>MQTT Subscriber</h1>
</body>
</html>
